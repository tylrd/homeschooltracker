# CLAUDE.md — HomeschoolTracker

## Dev Commands

```bash
pnpm dev          # Start dev server (Next.js turbopack)
pnpm build        # Production build
pnpm lint         # ESLint (flat config, v9)
pnpm format       # biome formatting
pnpm start        # Serve production build
```

Add shadcn/ui components:

```bash
pnpx shadcn@latest add <component>
```

```bash
pnpm docker:up    # Start Postgres container
pnpm docker:down  # Stop Postgres container
pnpm db:push      # Push schema to database (dev)
pnpm db:generate  # Generate migration files (prod)
pnpm db:migrate   # Run migrations (prod)
pnpm db:studio    # Open Drizzle Studio (DB GUI)
```

## Tech Stack

- **Framework:** Next.js 16.1 (App Router)
- **Language:** TypeScript 5 (strict mode)
- **React:** 19
- **Styling:** Tailwind CSS 4 with `@tailwindcss/postcss`, `tw-animate-css`
- **Components:** shadcn/ui (new-york style, neutral base color, Lucide icons)
- **UI primitives:** Radix UI (`radix-ui` unified package)
- **Database:** PostgreSQL 16 (Docker), Drizzle ORM, postgres.js driver
- **Package manager:** pnpm

## Architecture

- **Routing:** App Router (`app/` directory). All components are React Server Components by default; add `"use client"` only when needed.
- **Path aliases:** `@/*` maps to the project root (e.g. `@/lib/utils`, `@/components/ui/button`).
- **Theming:** CSS custom properties defined in `app/globals.css` using oklch colors. Light/dark mode via `.dark` class. Tailwind `@theme inline` block maps CSS vars to Tailwind tokens.
- **Fonts:** Geist Sans (`--font-geist-sans`) and Geist Mono (`--font-geist-mono`).

## Database

- **Schema:** `db/schema.ts` — all tables, relations, enums, and inferred types.
- **Connection:** `db/index.ts` — singleton Drizzle instance (`db`) and raw postgres.js client (`sql`). Uses `globalThis` caching for HMR in dev.
- **Config:** `drizzle.config.ts` — Drizzle Kit config. Reads `DATABASE_URL` from `.env.local`.
- **Migrations:** `drizzle/` directory (generated by `drizzle-kit generate`).
- **Tables:** `students`, `subjects`, `resources`, `lessons`, `daily_notes`.
- **Dev workflow:** `pnpm docker:up` → `pnpm db:push` to get started.

## Key Conventions

- Use `cn()` from `@/lib/utils` to merge Tailwind classes (clsx + tailwind-merge).
- shadcn/ui config (`components.json`): RSC enabled, TSX, cssVariables on, aliases at `@/components`, `@/components/ui`, `@/lib`, `@/hooks`.
- Prefer Server Components. Only use `"use client"` for interactivity (event handlers, hooks, browser APIs).
- No `src/` directory — code lives at the project root (`app/`, `lib/`, `components/`, `hooks/`).

